<main class="main w-full flex flex-col items-center">
  <div class="content w-full max-w-screen-xl">
    <!-- Ejemplo de login en la menubar -->


    <p-menubar [model]="items" class="shadow-md pink-menubar">
      <!-- Logo + texto -->
      <ng-template pTemplate="start">
        <a href="/" class="flex items-center gap-2">
          <img src="https://ladies-first.shop/uploads/resources/final-3.png" alt="logo"
            class="w-6 h-6 sm:w-8 sm:h-8 object-contain" />


          <span class="italic font-bold text-purple-800 text-lg whitespace-nowrap hidden xs:inline">Ladies First</span>
        </a>
      </ng-template>

      <!-- Botón cerrar sesión o login, siempre visible aunque colapse -->
      <ng-template pTemplate="end">
        <div class="flex items-center gap-4 pe-4">
          <p-menu *ngIf="!isAuthenticated" [model]="endItems" styleClass="menu-end">
          </p-menu>

          <p-button *ngIf="isAuthenticated" label="Cerrar sesión" class="whitespace-nowrap" severity="danger"
            variant="text" (click)="logout()" [loading]="isLoggingOut">
          </p-button>
        </div>
      </ng-template>
    </p-menubar>


    <p-dialog header="Iniciar Sesión" [(visible)]="displayLogin" modal="true" [style]="{'width': '30rem'}">
      <div class="grid ">

        <div class="col-12 md:col-12 lg:col-12 p-2 m-2 flex align-items-center justify-content-center">
          <p-floatLabel variant="on" class="">
            <input pInputText type="text" [(ngModel)]="loginModel.email" autocomplete="off" id="correo" />
            <label for="correo">Correo</label>
          </p-floatLabel>
        </div>

        <div class="col-12 md:col-12 lg:col-12 p-2 m-2 flex align-items-center justify-content-center">
          <p-floatLabel variant="on">
            <p-password [(ngModel)]="loginModel.password" toggleMask="true" id="contra" [feedback]="false"></p-password>
            <label for="contra">Contraseña</label>
          </p-floatLabel>
        </div>

        <div class="col-12 md:col-12 lg:col-12 p-2 m-2 flex align-items-center justify-content-center">
          <p-button [loading]="isLoggingOut" label="Iniciar sesión" (click)="login()"></p-button>
        </div>

      </div>





    </p-dialog>


    <p-dialog header="Registrarse" [(visible)]="displayRegister" modal="true" [style]="{'width': '40rem'}">

      <div class="p-fluid grid">
        <!-- Nombre -->
        <div class="col-12 pt-4 m-2">
          <p-floatLabel>
            <input pInputText type="text" [(ngModel)]="registerModel.nombre" id="nombre" class="w-full" />
            <label for="nombre">Nombre</label>
          </p-floatLabel>
        </div>

        <!-- Email -->
        <div class="col-12 pt-3 m-2">
          <p-floatLabel>
            <input pInputText type="email" [(ngModel)]="registerModel.email" id="email" class="w-full" />
            <label for="email">Correo</label>
          </p-floatLabel>
        </div>

        <!-- Contraseña -->
        <div class="col-12 pt-3 m-2 ">
          <p-floatLabel>
            <p-password [(ngModel)]="registerModel.password" toggleMask="true" id="password"
              class="w-full"></p-password>
            <label for="password">Contraseña</label>
          </p-floatLabel>
        </div>

        <!-- Fecha de Nacimiento -->
        <div class="col-12 pt-3 m-2">


          <p-datepicker [(ngModel)]="registerModel.fechaNacimiento" [iconDisplay]="'input'" [showIcon]="true"
            inputId="icondisplay" />

        </div>

        <!-- Calle -->
        <div class="col-12 pt-3 ">
          <p-floatLabel>
            <input pInputText type="text" [(ngModel)]="registerModel.calle" id="calle" class="w-full" />
            <label for="calle">Calle</label>
          </p-floatLabel>
        </div>

        <!-- Número -->
        <div class="col-12 pt-3">
          <p-floatLabel>
            <input pInputText type="text" [(ngModel)]="registerModel.numero" id="numero" class="w-full" />
            <label for="numero">Número</label>
          </p-floatLabel>
        </div>

        <!-- Colonia -->
        <div class="col-12 pt-3">
          <p-floatLabel>
            <input pInputText type="text" [(ngModel)]="registerModel.colonia" id="colonia" class="w-full" />
            <label for="colonia">Colonia</label>
          </p-floatLabel>
        </div>

        <!-- Código Postal -->
        <div class="col-12 pt-3">
          <p-floatLabel>
            <input pInputText type="text" [(ngModel)]="registerModel.codigoPostal" id="codigoPostal" class="w-full" />
            <label for="codigoPostal">Código Postal</label>
          </p-floatLabel>
        </div>

        <!-- Ciudad -->
        <div class="col-12 pt-3">
          <p-floatLabel>
            <input pInputText type="text" [(ngModel)]="registerModel.ciudad" id="ciudad" class="w-full" />
            <label for="ciudad">Ciudad</label>
          </p-floatLabel>
        </div>

        <!-- Estado -->
        <div class="col-12 pt-3">
          <p-floatLabel>
            <input pInputText type="text" [(ngModel)]="registerModel.estado" id="estado" class="w-full" />
            <label for="estado">Estado</label>
          </p-floatLabel>
        </div>
        <p *ngIf="error" class="col-12 p-2 flex align-items-center justify-content-center danger">{{error_string}} </p>
        <!-- Botón de Registro -->
        <div class="col-12 p-2 flex align-items-center justify-content-center">
          <p-button [loading]="registering" label="Registrarse" (click)="register()"></p-button>
        </div>
      </div>






    </p-dialog>


    <p-toast></p-toast>
    <router-outlet></router-outlet>
  </div>
</main>