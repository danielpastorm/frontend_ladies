<div *ngIf="cargando" class="loading-overlay">
  <p-progressSpinner></p-progressSpinner>
</div>

<div class="product-grid">
  <div *ngFor="let product of products" class="product-card">
    <!-- Solo se muestra la imagen si product.imagenes existe y no está vacía -->
    <div class="image-container" *ngIf="product.imagenes && product.imagenes.trim().length > 0">
      <img [src]="'https://ladies-first.shop/uploads/' + product.id + '/' + getFirstImage(product.imagenes)" alt="Imagen del producto">
    </div>
    <div class="product-details">
      <h3 class="product-title">{{ product.nombre }}</h3>
      <p class="product-description">{{ product.descripcion }}</p>
      <div class="product-footer">
        <span class="product-price">$ {{ product.precio }}</span>
        <button class="btn-add-to-cart" title="Agregar al carrito" (click)="addToCart(product)">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path d="M397.78 316h-205.13a15 15 0 0 1-14.65-11.67l-34.54-150.48a15 15 0 0 1 14.62-18.36h274.27a15 15 0 0 1 14.65 18.36l-34.6 150.48a15 15 0 0 1-14.62 11.67zm-193.19-30h181.25l27.67-120.48h-236.6z"/>
            <path d="M222 450a57.48 57.48 0 1 1 57.48-57.48 57.54 57.54 0 0 1-57.48 57.48zm0-84.95a27.48 27.48 0 1 0 27.48 27.47 27.5 27.5 0 0 0-27.48-27.47z"/>
            <path d="M368.42 450a57.48 57.48 0 1 1 57.48-57.48 57.54 57.54 0 0 1-57.48 57.48zm0-84.95a27.48 27.48 0 1 0 27.48 27.47 27.5 27.5 0 0 0-27.48-27.47z"/>
            <path d="M158.08 165.49a15 15 0 0 1-14.23-10.26l-25.71-77.23h-47.44a15 15 0 1 1 0-30h58.3a15 15 0 0 1 14.23 10.26l29.13 87.49a15 15 0 0 1-14.23 19.74z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
  <p *ngIf="!products || products.length === 0">No hay productos disponibles</p>
</div>
